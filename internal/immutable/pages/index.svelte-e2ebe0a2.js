import{S as A,i as C,s as M,F as ae,K as $,L as x,p as v,h as g,q as f,b as L,G as ie,H as le,I as re,f as k,t as B,o as G,M as b,u as Z,v as ee,J as E,w as te,n as V,N as S,x as I,e as O,y as K,z as N,O as Y,g as ne,C as R,d as se,P as ue,Q as ce,l as X,m as F,R as fe}from"../chunks/index-8513b36e.js";const z={custom:Symbol("custom data")},P=function(){let s=new Map,e=new ResizeObserver(function(i){for(const l of i)s.get(l.target)(l)}),{observe:n,unobserve:o}=e;return e.observe=(i,l=()=>{})=>{n&&n.call(e,i),s.set(i,l)},e.unobserve=(i,l=()=>{})=>{o&&o.call(e,i),s.delete(i,l)},e}();function H(s={},e={}){for(const[n,o]of Object.entries(e))s[n]===void 0&&(s[n]=o);return s}const _e=s=>H(s,{type:"display",x:0,y:0}),pe=s=>H(s,{type:"concept",x:0,y:0,text:"????"}),de=s=>H(s,{type:"connection",x:0,y:0,text:"????",componentA:null,componentB:null});function Q(s,e){if(!s.dataset||s.dataset.type)return s;for(let n=s;n!==e&&n!==null;n=n.parentElement){const{dataset:o}=n;if(!!o.type)return n}return null}function me(s,{onBegin:e=()=>!0,onDrag:n=()=>{},onEnd:o=()=>{}}){function i(l){l.preventDefault();const r={node:s};if(!e({event:l,data:r}))return;const a=l.clientX,t=l.clientY;function u(_){const p=_.clientX-a,m=_.clientY-t;n({event:_,dx:p,dy:m,data:r})}function c(_){_.button===l.button&&(o({event:_,data:r}),window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",c))}window.addEventListener("mousemove",u),window.addEventListener("mouseup",c)}return s.addEventListener("mousedown",i),{destroy(){s.removeEventListener("mousemove",i)}}}function he(s){let e,n,o,i;const l=s[3].default,r=ae(l,s,s[2],null);return{c(){e=$("svg"),r&&r.c(),this.h()},l(a){e=x(a,"svg",{"data-type":!0,class:!0,viewBox:!0});var t=v(e);r&&r.l(t),t.forEach(g),this.h()},h(){f(e,"data-type",n=s[0].type),f(e,"class","w-full h-full bg-slate-500"),f(e,"viewBox",o=-s[0].x+" "+-s[0].y+" 500 500")},m(a,t){L(a,e,t),r&&r.m(e,null),s[4](e),i=!0},p(a,[t]){r&&r.p&&(!i||t&4)&&ie(r,l,a,a[2],i?re(l,a[2],t,null):le(a[2]),null),(!i||t&1&&n!==(n=a[0].type))&&f(e,"data-type",n),(!i||t&1&&o!==(o=-a[0].x+" "+-a[0].y+" 500 500"))&&f(e,"viewBox",o)},i(a){i||(k(r,a),i=!0)},o(a){B(r,a),i=!1},d(a){a&&g(e),r&&r.d(a),s[4](null)}}}function ge(s,e,n){let{$$slots:o={},$$scope:i}=e,{data:l={}}=e,r;G(()=>{n(1,r[z.custom]=l,r)});function a(t){b[t?"unshift":"push"](()=>{r=t,n(1,r)})}return s.$$set=t=>{"data"in t&&n(0,l=t.data),"$$scope"in t&&n(2,i=t.$$scope)},[l,r,i,o,a]}class oe extends A{constructor(e){super(),C(this,e,ge,he,M,{data:0})}}function ye(s){let e,n,o,i,l,r,a,t=s[0].text+"",u,c,_,p;return{c(){e=$("g"),n=$("rect"),a=$("text"),u=Z(t),this.h()},l(m){e=x(m,"g",{"data-type":!0});var d=v(e);n=x(d,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0}),v(n).forEach(g),a=x(d,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,fill:!0});var D=v(a);u=ee(D,t),D.forEach(g),d.forEach(g),this.h()},h(){f(n,"x",o=s[0].x-w-s[3]/2),f(n,"y",i=s[0].y-w-s[4]/2),f(n,"width",l=s[3]+w*2),f(n,"height",r=s[4]+w*2),f(n,"rx",10),f(n,"fill","black"),f(a,"x",c=s[0].x),f(a,"y",_=s[0].y),f(a,"text-anchor","middle"),f(a,"dominant-baseline","middle"),f(a,"fill","white"),f(e,"data-type",p=s[0].type)},m(m,d){L(m,e,d),E(e,n),E(e,a),E(a,u),s[5](a),s[6](e)},p(m,[d]){d&9&&o!==(o=m[0].x-w-m[3]/2)&&f(n,"x",o),d&17&&i!==(i=m[0].y-w-m[4]/2)&&f(n,"y",i),d&8&&l!==(l=m[3]+w*2)&&f(n,"width",l),d&16&&r!==(r=m[4]+w*2)&&f(n,"height",r),d&1&&t!==(t=m[0].text+"")&&te(u,t),d&1&&c!==(c=m[0].x)&&f(a,"x",c),d&1&&_!==(_=m[0].y)&&f(a,"y",_),d&1&&p!==(p=m[0].type)&&f(e,"data-type",p)},i:V,o:V,d(m){m&&g(e),s[5](null),s[6](null)}}}let w=8;function ve(s,e,n){let{data:o={}}=e,i,l,r=0,a=0;G(()=>(P.observe(l,c=>{const _=c.contentRect;n(3,r=_.width),n(4,a=_.height)}),n(1,i[z.custom]=o,i),()=>{P.unobserve(l)}));function t(c){b[c?"unshift":"push"](()=>{l=c,n(2,l)})}function u(c){b[c?"unshift":"push"](()=>{i=c,n(1,i)})}return s.$$set=c=>{"data"in c&&n(0,o=c.data)},[o,i,l,r,a,t,u]}class be extends A{constructor(e){super(),C(this,e,ve,ye,M,{data:0})}}function we(s){let e,n,o,i,l,r,a,t,u,c,_,p,m=s[0].text+"",d,D,j,q;return{c(){e=$("g"),n=$("line"),a=$("line"),p=$("text"),d=Z(m),this.h()},l(y){e=x(y,"g",{"data-type":!0});var h=v(e);n=x(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),v(n).forEach(g),a=x(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),v(a).forEach(g),p=x(h,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,fill:!0});var J=v(p);d=ee(J,m),J.forEach(g),h.forEach(g),this.h()},h(){f(n,"x1",o=s[0].componentA.x),f(n,"y1",i=s[0].componentA.y),f(n,"x2",l=s[0].x),f(n,"y2",r=s[0].y),f(n,"stroke","white"),f(a,"x1",t=s[0].componentB.x),f(a,"y1",u=s[0].componentB.y),f(a,"x2",c=s[0].x),f(a,"y2",_=s[0].y),f(a,"stroke","white"),f(p,"x",D=s[0].x),f(p,"y",j=s[0].y),f(p,"text-anchor","middle"),f(p,"dominant-baseline","middle"),f(p,"fill","black"),f(e,"data-type",q=s[0].type)},m(y,h){L(y,e,h),E(e,n),E(e,a),E(e,p),E(p,d),s[2](e)},p(y,[h]){h&1&&o!==(o=y[0].componentA.x)&&f(n,"x1",o),h&1&&i!==(i=y[0].componentA.y)&&f(n,"y1",i),h&1&&l!==(l=y[0].x)&&f(n,"x2",l),h&1&&r!==(r=y[0].y)&&f(n,"y2",r),h&1&&t!==(t=y[0].componentB.x)&&f(a,"x1",t),h&1&&u!==(u=y[0].componentB.y)&&f(a,"y1",u),h&1&&c!==(c=y[0].x)&&f(a,"x2",c),h&1&&_!==(_=y[0].y)&&f(a,"y2",_),h&1&&m!==(m=y[0].text+"")&&te(d,m),h&1&&D!==(D=y[0].x)&&f(p,"x",D),h&1&&j!==(j=y[0].y)&&f(p,"y",j),h&1&&q!==(q=y[0].type)&&f(e,"data-type",q)},i:V,o:V,d(y){y&&g(e),s[2](null)}}}function $e(s,e,n){let{data:o={}}=e,i;G(()=>{n(1,i[z.custom]=o,i)});function l(r){b[r?"unshift":"push"](()=>{i=r,n(1,i)})}return s.$$set=r=>{"data"in r&&n(0,o=r.data)},[o,i,l]}class xe extends A{constructor(e){super(),C(this,e,$e,we,M,{data:0})}}function Ee(s){let e,n,o,i;function l(t){s[1](t)}var r=T[s[0].type];function a(t){let u={};return t[0]!==void 0&&(u.data=t[0]),{props:u}}return r&&(e=new r(a(s)),b.push(()=>S(e,"data",l))),{c(){e&&I(e.$$.fragment),o=O()},l(t){e&&K(e.$$.fragment,t),o=O()},m(t,u){e&&N(e,t,u),L(t,o,u),i=!0},p(t,[u]){const c={};if(!n&&u&1&&(n=!0,c.data=t[0],Y(()=>n=!1)),r!==(r=T[t[0].type])){if(e){ne();const _=e;B(_.$$.fragment,1,0,()=>{R(_,1)}),se()}r?(e=new r(a(t)),b.push(()=>S(e,"data",l)),I(e.$$.fragment),k(e.$$.fragment,1),N(e,o.parentNode,o)):e=null}else r&&e.$set(c)},i(t){i||(e&&k(e.$$.fragment,t),i=!0)},o(t){e&&B(e.$$.fragment,t),i=!1},d(t){t&&g(o),e&&R(e,t)}}}const T={display:oe,concept:be,connection:xe};function ke(s,e,n){let{data:o={}}=e;function i(l){o=l,n(0,o)}return s.$$set=l=>{"data"in l&&n(0,o=l.data)},[o,i]}class Be extends A{constructor(e){super(),C(this,e,ke,Ee,M,{data:0})}}function U(s,e,n){const o=s.slice();return o[2]=e[n],o[3]=e,o[4]=n,o}function W(s,e){let n,o,i,l;function r(t){e[1](t,e[2],e[3],e[4])}let a={};return e[2]!==void 0&&(a.data=e[2]),o=new Be({props:a}),b.push(()=>S(o,"data",r)),{key:s,first:null,c(){n=O(),I(o.$$.fragment),this.h()},l(t){n=O(),K(o.$$.fragment,t),this.h()},h(){this.first=n},m(t,u){L(t,n,u),N(o,t,u),l=!0},p(t,u){e=t;const c={};!i&&u&1&&(i=!0,c.data=e[2],Y(()=>i=!1)),o.$set(c)},i(t){l||(k(o.$$.fragment,t),l=!0)},o(t){B(o.$$.fragment,t),l=!1},d(t){t&&g(n),R(o,t)}}}function Le(s){let e=[],n=new Map,o,i,l=s[0];const r=a=>a[2];for(let a=0;a<l.length;a+=1){let t=U(s,l,a),u=r(t);n.set(u,e[a]=W(u,t))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();o=O()},l(a){for(let t=0;t<e.length;t+=1)e[t].l(a);o=O()},m(a,t){for(let u=0;u<e.length;u+=1)e[u].m(a,t);L(a,o,t),i=!0},p(a,[t]){t&1&&(l=a[0],ne(),e=ue(e,t,r,1,a,l,n,o.parentNode,ce,W,o,U),se())},i(a){if(!i){for(let t=0;t<l.length;t+=1)k(e[t]);i=!0}},o(a){for(let t=0;t<e.length;t+=1)B(e[t]);i=!1},d(a){for(let t=0;t<e.length;t+=1)e[t].d(a);a&&g(o)}}}function De(s,e,n){let{components:o=[]}=e;function i(l,r,a,t){a[t]=l,n(0,o)}return s.$$set=l=>{"components"in l&&n(0,o=l.components)},[o,i]}class ze extends A{constructor(e){super(),C(this,e,De,Le,M,{components:0})}}function Ae(s){let e,n,o;function i(r){s[5](r)}let l={};return s[0]!==void 0&&(l.components=s[0]),e=new ze({props:l}),b.push(()=>S(e,"components",i)),{c(){I(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,a){N(e,r,a),o=!0},p(r,a){const t={};!n&&a&1&&(n=!0,t.components=r[0],Y(()=>n=!1)),e.$set(t)},i(r){o||(k(e.$$.fragment,r),o=!0)},o(r){B(e.$$.fragment,r),o=!1},d(r){R(e,r)}}}function Ce(s){let e,n,o,i,l,r;function a(u){s[6](u)}let t={$$slots:{default:[Ae]},$$scope:{ctx:s}};return s[1]!==void 0&&(t.data=s[1]),n=new oe({props:t}),b.push(()=>S(n,"data",a)),{c(){e=X("div"),I(n.$$.fragment),this.h()},l(u){e=F(u,"DIV",{class:!0});var c=v(e);K(n.$$.fragment,c),c.forEach(g),this.h()},h(){f(e,"class","w-full h-full")},m(u,c){L(u,e,c),N(n,e,null),i=!0,l||(r=fe(me.call(null,e,{onBegin:s[2],onDrag:s[3],onEnd:s[4]})),l=!0)},p(u,[c]){const _={};c&129&&(_.$$scope={dirty:c,ctx:u}),!o&&c&2&&(o=!0,_.data=u[1],Y(()=>o=!1)),n.$set(_)},i(u){i||(k(n.$$.fragment,u),i=!0)},o(u){B(n.$$.fragment,u),i=!1},d(u){u&&g(e),R(n),l=!1,r()}}}function Me(s,e,n){let{components:o=[]}=e,i=_e({});function l({event:c,data:_}){const p=Q(c.target,_.node);return p===null?!1:(_.closest_begin={element:p,data:p[z.custom],position:{x:p[z.custom].x,y:p[z.custom].y}},!0)}function r({event:c,dx:_,dy:p,data:m}){const{closest_begin:d}=m;d.data.x=d.position.x,d.data.y=d.position.y,c.shiftKey||(d.data.x+=_,d.data.y+=p),d.data===i&&n(1,i),n(0,o)}function a({event:c,data:_}){const{closest_begin:p}=_,m=Q(c.target,_.node);if(m===null||p===m)return;const d=m[z.custom];d!==i&&c.shiftKey&&n(0,o[o.length]=de({x:(p.data.x+d.x)/2,y:(p.data.y+d.y)/2,componentA:p.data,componentB:d}),o)}function t(c){o=c,n(0,o)}function u(c){i=c,n(1,i)}return s.$$set=c=>{"components"in c&&n(0,o=c.components)},[o,i,l,r,a,t,u]}class Se extends A{constructor(e){super(),C(this,e,Me,Ce,M,{components:0})}}function Ie(s){let e,n,o,i,l;function r(t){s[1](t)}let a={};return s[0]!==void 0&&(a.components=s[0]),o=new Se({props:a}),b.push(()=>S(o,"components",r)),{c(){e=X("main"),n=X("div"),I(o.$$.fragment),this.h()},l(t){e=F(t,"MAIN",{class:!0});var u=v(e);n=F(u,"DIV",{class:!0});var c=v(n);K(o.$$.fragment,c),c.forEach(g),u.forEach(g),this.h()},h(){f(n,"class","w-[500px] h-[500px]"),f(e,"class","svelte-17zssja")},m(t,u){L(t,e,u),E(e,n),N(o,n,null),l=!0},p(t,[u]){const c={};!i&&u&1&&(i=!0,c.components=t[0],Y(()=>i=!1)),o.$set(c)},i(t){l||(k(o.$$.fragment,t),l=!0)},o(t){B(o.$$.fragment,t),l=!1},d(t){t&&g(e),R(o)}}}function Oe(s,e,n){let o=[];for(let l=0;l<5;l++)o.push(pe({x:100,y:100,text:`Concept-${l}`}));o=o;function i(l){o=l,n(0,o)}return[o,i]}class Re extends A{constructor(e){super(),C(this,e,Oe,Ie,M,{})}}export{Re as default};
